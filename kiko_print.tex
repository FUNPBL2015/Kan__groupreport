%\section{「印刷する」機能}
本アプリにはカードリストから写真データや観光情報を取得することによって、1枚のリーフレットを作成する機能がある。まず、リーフレットに使うための画像をユーザがカードリストから選択する。リーフレット使いたい画像を上限の7枚を選ぶと完了ボタンが選択できるようになる。写真が７枚選びきれていない状態で完了ボタンを押すと警告が表示し、ユーザに写真を選択するように指示をする。正常に写真が選択されれば、印刷プレビュー画面に遷移する。印刷プレビュー画面ではリーフレットの表と裏の画像が見れるようになっており、ユーザがどんなリーフレットができるのか確認できるようにした。ユーザがリーフレットのレイアウトに気に入った場合は画面上の印刷ボタンをタップすると印刷の処理が行われる。\\
　次に印刷するリーフレットの画像データをiPhoneの機能であるAirPrintを使って無線で飛ばし、リーフレットを印刷する。AirPrintを使用するためには画像データをNSDataにする必要があったためリーフレットの画像をpdfに変換し、そのデータをNSDataに変換することとした。両面印刷するためには2枚の画像データを1つのものとして扱う必要があったため、pdfにするプロセスを挟んだ。AirPrintに関するswiftでの実装例があまりなく、Objective-Cでプログラムが書かれていることが多かったため実装は難しかった。なので、Objective-Cで書かれたコードを1行ずつswiftで書き直して実装した。\\
　印刷ボタンをタップした後は、AirPrintするための設定画面が表示される。そこではプリンターを選択したり、印刷枚数、白黒印刷にするのかカラー印刷にするのか選択することができる。ユーザが以上のことを選択し、印刷ボタンを選択すればAirPrintでデータがプリンターに送信され印刷が開始される。
\bunseki{池田俊輝}